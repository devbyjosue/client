<div class="info-container p-4 md:p-8 bg-white min-h-screen">
    
    <div class=" rounded-lg overflow-hidden">
    <dx-data-grid
        [dataSource]="dataSource()" 
        [columns]="columnConfigurations()"
        [showBorders]="false"
        [showColumnLines]="false"
        [hoverStateEnabled]="true"
        [rowAlternationEnabled]="true"
        (onRowClick)="onRowClick($event)"
        (onRowUpdating)="onRowUpdating($event)" 
        (onRowInserting)="onRowInserting($event)"
        (onRowRemoving)="onRowRemoving($event)"
        (onCellPrepared)="onCellPrepared($event)"
        (onEditorPreparing)="onEditorPreparing($event)"
        [keyExpr]="gridKeyField()"  
        class="w-full"
    >
        <dxo-master-detail
            [enabled]="true"
            template="detailGridTemplate"
        ></dxo-master-detail>

        <div *dxTemplate="let salesOrder of 'detailGridTemplate'">
            <dx-data-grid
                [dataSource]="getDetailGridDataSource()"
                [columns]="detailColumnConfigurations()"                
                (onCellPrepared)="onCellPrepared($event)"
                (onRowInserting)="onRowInserting($event)"
                [showBorders]="false"
                [showColumnLines]="false"
                [hoverStateEnabled]="true"
                [rowAlternationEnabled]="true"
                [keyExpr]="'salesOrderDetailId'"
            >
                <dxo-paging [pageSize]="5"></dxo-paging>
                <dxo-pager
                    [showPageSizeSelector]="true"
                    [allowedPageSizes]="[5, 10, 20]"
                    [showInfo]="true">
                </dxo-pager>
            </dx-data-grid>
        </div>
  
    
        <dxo-paging [pageSize]="10"></dxo-paging>
        <dxo-pager
            [showPageSizeSelector]="true"
            [allowedPageSizes]="[5, 10, 20]"
            [showInfo]="true">
        </dxo-pager>
        <dxo-editing 
            mode="popup" 
            [allowDeleting]="true"
            [allowAdding]="true"
            [useIcons]="true">
            <dxo-popup 
                [showTitle]="true"
                [width]="700"
                [height]="'auto'">
            </dxo-popup>

            <dxo-form
                >
                   
                    <dxi-item 
                        [dataField]="'Customer'"
                        editorType="dxSelectBox"
                        [editorOptions]="{
                            dataSource: customersAvailable(),
                            placeholder: 'Select a Customer',
                            searchEnabled: true
                        }"
                        >
                    </dxi-item>

                    <!-- <dxi-item>
                    </dxi-item> -->
                    
                    <!-- <dxi-item 
                    dataField="Product" 
                    editorType="dxSelectBox"
                    [editorOptions]="{
                        dataSource: productsAvailable(), 
                        placeholder: 'Select a product',
                        searchEnabled: true
                            }"
                        >
                
                     </dxi-item>
                    <dxi-item 
                    [dataField]="'Quantity'"
                    [validationRules]="[{ type: 'numeric' }]"
                
                    >
                </dxi-item> -->

                <dxi-item>
                    <dx-button icon="add" (onClick)="addProduct()"></dx-button>
                </dxi-item>
                  
                <ng-container *ngFor="let i of productsCounter(); let idx = index">
                    <dxi-item 
                        dataField="Product" 
                        editorType="dxSelectBox"
                        [editorOptions]="{
                            dataSource: productsAvailable(), 
                            placeholder: 'Select a product',
                            searchEnabled: true
                        }"
                    >
                    </dxi-item>
                    <dxi-item 
                        [dataField]="'Quantity'"
                        [validationRules]="[{ type: 'numeric' }]"
                    >
                    </dxi-item>
                </ng-container>



                </dxo-form>
          
        </dxo-editing>
       
    </dx-data-grid>
</div>


</div>